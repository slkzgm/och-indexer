# =============================================================================
# GAME EVENTS SCHEMA
# =============================================================================
# This schema defines events and entities for OCH season 2
# featuring heroes, weapons, crafting, and various game mechanics.

# =============================================================================
# BLACKSMITH EVENTS
# =============================================================================
# Events related to weapon maintenance and enhancement

"""
Event triggered when a weapon is repaired at the blacksmith
"""
type Blacksmith_WeaponRepaired {
  id: ID!
  weaponId: BigInt!
  amount: BigInt! # Amount paid for repair
}

"""
Event triggered when a weapon is sharpened at the blacksmith
"""
type Blacksmith_WeaponSharpened {
  id: ID!
  weaponId: BigInt!
  amount: BigInt! # Amount paid for sharpening
}

# =============================================================================
# DRAGMA UNDERLINGS EVENTS
# =============================================================================
# Events related to hero staking and reward claiming system

"""
Event triggered when a user claims rewards from staked heroes
"""
type DragmaUnderlings_Claimed {
  id: ID!
  user: String! # User's wallet address
  heroId: BigInt!
  amount: BigInt! # Amount of rewards claimed
}

"""
Event triggered when a hero is staked for earning rewards
"""
type DragmaUnderlings_Staked {
  id: ID!
  user: String! # User's wallet address
  heroId: BigInt!
}

"""
Event triggered when a hero is unstaked from the rewards system
"""
type DragmaUnderlings_Unstaked {
  id: ID!
  user: String! # User's wallet address
  heroId: BigInt!
}

"""
Event triggered when a weapon's durability is updated during gameplay
"""
type DragmaUnderlings_WeaponDurabilityUpdated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  oldDurability: BigInt!
  newDurability: BigInt!
}

"""
Event triggered when a weapon's sharpness is updated during gameplay
"""
type DragmaUnderlings_WeaponSharpnessUpdated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  oldSharpness: BigInt!
  newSharpness: BigInt!
}

# =============================================================================
# GACHA EVENTS (ERC1155)
# =============================================================================
# Events related to gacha token transfers and management

"""
Event for batch transfers of gacha tokens (ERC1155)
"""
type Gacha1155_TransferBatch {
  id: ID!
  operator: String! # Address performing the transfer
  from: String! # Sender address
  to: String! # Recipient address
  ids: [BigInt!]! # Array of token IDs transferred
  amounts: [BigInt!]! # Array of amounts for each token ID
}

"""
Event for single transfer of gacha tokens (ERC1155)
"""
type Gacha1155_TransferSingle {
  id: ID!
  operator: String! # Address performing the transfer
  from: String! # Sender address
  to: String! # Recipient address
  event_id: BigInt! # Token ID being transferred
  amount: BigInt! # Amount transferred
}

# =============================================================================
# GACHA WEAPON MACHINE EVENTS
# =============================================================================
# Events related to weapon generation from gacha tokens

"""
Event triggered when a weapon is generated from gacha machine
"""
type GachaWeaponMachine_WeaponGenerated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  metadata: BigInt! # Weapon metadata/attributes
  requestId: BigInt! # Links to the original request
}

"""
Event triggered when a weapon generation is requested from gacha machine
"""
type GachaWeaponMachine_WeaponRequested {
  id: ID!
  user: String! # User's wallet address
  tokenId: BigInt! # Gacha token ID used
  qty: BigInt! # Quantity of weapons requested
  requestId: BigInt! # Unique request identifier
}

# =============================================================================
# GYM EVENTS
# =============================================================================
# Events related to hero training and level upgrades

"""
Event triggered when a hero is upgraded using chaos upgrade method
"""
type Gym_ChaosUpgraded {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  season: BigInt! # Current game season
  oldLevel: BigInt!
  newLevel: BigInt!
  chances: [BigInt!]! # Success chances for each level attempt
}

"""
Event triggered when a hero is upgraded using normal upgrade method
"""
type Gym_NormalUpgraded {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  season: BigInt! # Current game season
  oldLevel: BigInt!
  newLevel: BigInt!
}

"""
Event triggered when a hero is upgraded using unknown upgrade method
"""
type Gym_UnknownUpgraded {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  season: BigInt! # Current game season
  oldLevel: BigInt!
  newLevel: BigInt!
  chances: [BigInt!]! # Success chances for each level attempt
}

"""
Event triggered when a hero upgrade is requested
"""
type Gym_UpgradeRequested {
  id: ID!
  season: BigInt! # Current game season
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  levelUp: BigInt! # Number of levels to upgrade
  cost: BigInt! # Total cost for the upgrade
}

# =============================================================================
# HERO TOKEN EVENTS (ERC20 & ERC721)
# =============================================================================
# Events related to hero token transfers

"""
Event for Hero ERC20 token transfers
"""
type Hero20_Transfer {
  id: ID!
  from: String! # Sender address
  to: String! # Recipient address
  amount: BigInt! # Amount transferred
}

"""
Event for consecutive Hero NFT transfers (ERC721)
"""
type Hero721_ConsecutiveTransfer {
  id: ID!
  fromTokenId: BigInt! # Starting token ID
  toTokenId: BigInt! # Ending token ID
  from: String! # Sender address
  to: String! # Recipient address
}

"""
Event for single Hero NFT transfer (ERC721)
"""
type Hero721_Transfer {
  id: ID!
  from: String! # Sender address
  to: String! # Recipient address
  tokenId: BigInt! # Hero token ID
}

# =============================================================================
# HERO ARMORY EVENTS
# =============================================================================
# Events related to weapon equipment system

"""
Event triggered when a weapon is equipped to a hero
"""
type HeroArmory_Equipped {
  id: ID!
  heroId: BigInt!
  weaponId: BigInt!
}

"""
Event triggered when a weapon is unequipped from a hero
"""
type HeroArmory_Unequipped {
  id: ID!
  heroId: BigInt!
  weaponId: BigInt!
}

# =============================================================================
# HERO WEAPON MACHINE EVENTS
# =============================================================================
# Events related to weapon generation from hero machine

"""
Event triggered when a weapon is generated from hero machine
"""
type HeroWeaponMachine_WeaponGenerated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  metadata: BigInt! # Weapon metadata/attributes
  requestId: BigInt! # Links to the original request
}

"""
Event triggered when a weapon generation is requested from hero machine
"""
type HeroWeaponMachine_WeaponRequested {
  id: ID!
  user: String! # User's wallet address
  slot: BigInt! # Equipment slot for the weapon
  qty: BigInt! # Quantity of weapons requested
  amount: BigInt! # Total cost paid
  requestId: BigInt! # Unique request identifier
}

# =============================================================================
# WEAPON TOKEN EVENTS (ERC721)
# =============================================================================
# Events related to weapon NFT transfers and generation

"""
Event for consecutive Weapon NFT transfers (ERC721)
"""
type Weapon721_ConsecutiveTransfer {
  id: ID!
  fromTokenId: BigInt! # Starting token ID
  toTokenId: BigInt! # Ending token ID
  from: String! # Sender address
  to: String! # Recipient address
}

"""
Event for single Weapon NFT transfer (ERC721)
"""
type Weapon721_Transfer {
  id: ID!
  from: String! # Sender address
  to: String! # Recipient address
  tokenId: BigInt! # Weapon token ID
}

"""
Event triggered when weapons are generated/minted
"""
type Weapon721_WeaponGenerated {
  id: ID!
  to: String! # Recipient address
  qty: BigInt! # Quantity of weapons generated
}

"""
Event triggered when weapon metadata is generated
"""
type Weapon721_WeaponMetadataGenerated {
  id: ID!
  event_id: BigInt! # Token ID
  metadata: BigInt! # Weapon metadata/attributes
}

# =============================================================================
# WEAPON REMIXER EVENTS
# =============================================================================
# Events related to weapon mixing/combining system

"""
Event triggered when a legendary weapon mix is requested
"""
type WeaponRemixer_LegendaryMixRequested {
  id: ID!
  weaponIds: [BigInt!]! # Array of weapon IDs to be mixed
  cost: BigInt! # Total cost for the mix
  rarity: BigInt! # Target rarity level
  requestId: BigInt! # Unique request identifier
}

"""
Event triggered when a weapon is generated from remixer
"""
type WeaponRemixer_WeaponGenerated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  metadata: BigInt! # Weapon metadata/attributes
  requestId: BigInt! # Links to the original request
}

"""
Event triggered when a weapon mix is requested
"""
type WeaponRemixer_WeaponMixRequested {
  id: ID!
  weaponIds: [BigInt!]! # Array of weapon IDs to be mixed
  cost: BigInt! # Total cost for the mix
  rarity: BigInt! # Target rarity level
  requestId: BigInt! # Unique request identifier
}

# =============================================================================
# ITEMS EVENTS (ERC1155)
# =============================================================================
# Events related to game items transfers

"""
Event for single transfer of game items (ERC1155)
"""
type Items_TransferSingle {
  id: ID!
  operator: String! # Address performing the transfer
  from: String! # Sender address
  to: String! # Recipient address
  event_id: BigInt! # Item ID being transferred
  amount: BigInt! # Amount transferred
}

"""
Event for batch transfers of game items (ERC1155)
"""
type Items_TransferBatch {
  id: ID!
  operator: String! # Address performing the transfer
  from: String! # Sender address
  to: String! # Recipient address
  ids: [BigInt!]! # Array of item IDs transferred
  amounts: [BigInt!]! # Array of amounts for each item ID
}

# =============================================================================
# FISHING EVENTS
# =============================================================================
# Events related to fishing mini-game mechanics

"""
Event triggered when a hero is staked for fishing
"""
type Fishing_Staked {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  zone: BigInt! # Fishing zone identifier (0-3)
  fee: BigInt! # Staking fee paid
}

"""
Event triggered when a fishing unstake is requested
"""
type Fishing_UnstakeRequested {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  requestId: BigInt! # Unique request identifier
}

"""
Event triggered when a hero is unstaked from fishing
"""
type Fishing_Unstaked {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  requestId: BigInt! # Links to the original request
  zone: BigInt! # Fishing zone identifier (0-3)
  amount: BigInt! # Rewards earned
  weaponShardId: BigInt! # Weapon shard obtained
  bonusId: BigInt! # Bonus item obtained
}

"""
Event triggered when a hero dies during fishing
"""
type Fishing_Dead {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  requestId: BigInt! # Links to the original request
}

"""
Event triggered when a hero is revived from death
"""
type Fishing_Revived {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  cost: BigInt! # Cost paid for revival
}

# =============================================================================
# DRAGMA EVENTS
# =============================================================================

"""
Event triggered when a hero is staked in Dragma
"""
type Dragma_Staked {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  entryFee: BigInt! # Entry fee paid
  attackZone: BigInt! # Zone where hero is staked (0-3: Tails, Legs, Torso, Head)
}

"""
Event triggered when an unstake is requested in Dragma
"""
type Dragma_UnstakeRequested {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  requestId: BigInt! # Request ID for the unstake
}

"""
Event triggered when a hero is unstaked from Dragma with rewards
"""
type Dragma_Unstaked {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  requestId: BigInt! # Request ID
  gachaTokenId: BigInt! # Gacha token ID (0 if none)
  weaponShardQty: BigInt! # Quantity of weapon shards
  primaryRewards: [BigInt!]! # Array of primary reward token IDs
  secondaryRewards: [BigInt!]! # Array of secondary reward token IDs
  tertiaryRewards: [BigInt!]! # Array of tertiary reward token IDs
}

"""
Event triggered when a hero dies in Dragma
"""
type Dragma_HeroDied {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
}

"""
Event triggered when a hero is revived in Dragma
"""
type Dragma_Revived {
  id: ID!
  owner: String! # Hero owner's wallet address
  heroId: BigInt!
  fee: BigInt! # Revival fee
}

"""
Event triggered when a weapon's durability is updated in Dragma
"""
type Dragma_WeaponDurabilityUpdated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  oldDurability: BigInt!
  newDurability: BigInt!
}

"""
Event triggered when a weapon's sharpness is updated in Dragma
"""
type Dragma_WeaponSharpnessUpdated {
  id: ID!
  user: String! # User's wallet address
  weaponId: BigInt!
  oldSharpness: BigInt!
  newSharpness: BigInt!
}

# =============================================================================
# CORE GAME ENTITIES
# =============================================================================

"""
Player entity representing a game user and their overall stats
"""
type Player @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # Player's wallet address
  balance: BigInt! # Player's token balance (in wei)

  # =============================================================================
  # INVENTORY COUNTS
  # =============================================================================
  heroCount: Int! @default(value: "0") # Total number of heroes owned
  weaponCount: Int! @default(value: "0") # Total number of weapons owned
  stakedHeroCount: Int! @default(value: "0") # Number of currently staked heroes
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)

  # =============================================================================
  # TOKEN BALANCES
  # =============================================================================
  # Gacha token balances: [bronze, silver, gold, rainbow] - fixed order
  gachaBalances: [BigInt!]! @default(value: "[0, 0, 0, 0]")
  
  # Game items balances: [tokenId1, tokenId2, ..., tokenId100] - mapped to indices [0, 1, ..., 99]
  itemsBalances: [BigInt!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  
  # =============================================================================
  # ECONOMY TRACKING
  # =============================================================================
  totalSpent: BigInt! @default(value: "0") # Total spent across all game activities (training, fishing, remix, etc.)

  # =============================================================================
  # RELATIONS
  # =============================================================================
  heroes: [Hero!]! @derivedFrom(field: "owner") # All heroes owned by this player
  weapons: [Weapon!]! @derivedFrom(field: "owner") # All weapons owned by this player
}

"""
Hero entity representing a playable character NFT with progression, staking, and combat capabilities
"""
type Hero @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: String! # Hero token ID
  owner: Player! # Player who owns this hero
  minter: Bytes! # Address that minted this hero
  mintedTimestamp: BigInt! # When this hero was minted
  revealed: Boolean! @default(value: false) # Whether hero attributes are revealed

  # =============================================================================
  # CHARACTER PROGRESSION
  # =============================================================================
  level: Int! @default(value: "1") # Current hero level (1-100)
  lastTrainingTimestamp: BigInt! @default(value: "0") # Last time hero was trained
  nextTrainingCost: BigInt! @default(value: "0") # Cost for next training session
  nextTrainingAvailable: BigInt! @default(value: "0") # When next training is available (24h cooldown)

  # =============================================================================
  # EQUIPMENT & COMBAT
  # =============================================================================
  equippedWeapon: Weapon @oneToOne @index # Currently equipped weapon
  damage: BigInt! @default(value: "0") # Total damage output (level * weapon coefficient)

  # =============================================================================
  # REWARDS CALCULATION SYSTEM (all values in wei - 1e18)
  # =============================================================================
  maxHeroPerDay: BigInt! @default(value: "0") # Maximum possible rewards per day
  baseHeroPerDay: BigInt! @default(value: "0") # Guaranteed 80% of max rewards
  bonusHeroPerDay: BigInt! @default(value: "0") # Current sharpness bonus (0-20% of max)
  effectiveHeroPerDay: BigInt! @default(value: "0") # Total daily rewards (base + bonus + 50)
  
  # Hourly equivalents for convenience calculations
  maxHeroPerHour: BigInt! @default(value: "0") # maxHeroPerDay / 24
  effectiveHeroPerHour: BigInt! @default(value: "0") # effectiveHeroPerDay / 24

  # =============================================================================
  # STAKING SYSTEM
  # =============================================================================
  staked: Boolean! @default(value: false) # Whether hero is currently staked
  stakingType: StakingType # Type of staking (fishing, dragma, etc.)
  stakedTimestamp: BigInt! @default(value: "0") # When hero was staked
  unstakeAvailableTimestamp: BigInt! @default(value: "0") # When hero can be unstaked (cooldown)
  lastClaimTimestamp: BigInt! @default(value: "0") # Last time rewards were claimed
  totalRewardsClaimed: BigInt! @default(value: "0") # Total rewards claimed for this hero
  totalStakingDuration: BigInt! @default(value: "0") # Total staking duration in seconds (cumulative)
  totalStakes: Int! @default(value: "0") # Total number of stakes for this hero
  totalUnstakes: Int! @default(value: "0") # Total number of unstakes
  totalClaims: Int! @default(value: "0") # Total number of claims

  # =============================================================================
  # FISHING ACTIVITY STATS
  # =============================================================================
  totalFishingFees: BigInt! @default(value: "0") # Total fees paid for fishing
  totalFishingRewards: BigInt! @default(value: "0") # Total rewards earned from fishing
  fishingRewardsPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  totalFishingShards: Int! @default(value: "0") # Total weapon shards won
  fishingShardsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Shards won per zone
  totalFishingBonuses: Int! @default(value: "0") # Total bonus items won
  fishingBonusesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Bonuses won per zone
  totalFishingSessions: Int! @default(value: "0") # Total fishing sessions
  fishingSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Sessions per zone

  # =============================================================================
  # DEATH & REVIVAL SYSTEM
  # =============================================================================
  # General death/revival tracking
  isDead: Boolean! @default(value: false) # Whether hero is currently dead (prevents staking/training)
  deathLocation: DeathLocation # Contract where hero died (null if alive or revived)
  deathsCount: Int! @default(value: "0") # Total number of deaths
  revivalCount: Int! @default(value: "0") # Total number of revivals
  spentOnRevive: BigInt! @default(value: "0") # Total cost spent on revivals

  # Contract-specific death/revival stats
  fishingDeathCount: Int! @default(value: "0") # Deaths in fishing
  fishingRevivalCount: Int! @default(value: "0") # Revivals in fishing
  fishingReviveSpent: BigInt! @default(value: "0") # Cost spent on fishing revivals
  fishingDeathPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per fishing zone [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  dragmaDeathCount: Int! @default(value: "0") # Deaths in dragma
  dragmaRevivalCount: Int! @default(value: "0") # Revivals in dragma
  dragmaReviveSpent: BigInt! @default(value: "0") # Cost spent on dragma revivals
  dragmaDeathPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per dragma zone [TAILS, LEGS, TORSO, HEAD]
  # Last death zone for accurate current-dead per-zone adjustments on revival
  lastDeathZone: Int

  # =============================================================================
  # TRAINING STATS
  # =============================================================================
  # Overall training statistics
  totalAttemptedTrainings: Int! @default(value: "0") # Total training attempts
  totalSuccessfulTrainings: Int! @default(value: "0") # Total successful trainings (level increased)
  totalFailedTrainings: Int! @default(value: "0") # Total failed trainings (level unchanged)
  
  # Training statistics by type [NORMAL, CHAOS, UNKNOWN]
  attemptedByType: [Int!]! @default(value: "[0,0,0]") # Attempts by training type
  successfulByType: [Int!]! @default(value: "[0,0,0]") # Successes by training type
  failedByType: [Int!]! @default(value: "[0,0,0]") # Failures by training type
  totalOutcomeSumByType: [BigInt!]! @default(value: "[0,0,0]") # Sum of level increases by type
  outcomesCountByType: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Detailed outcome counts by type
  sumOfChancesByType: [[BigInt!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Sum of chances by type
  chancesCountByType: [Int!]! @default(value: "[0,0,0]") # Number of chance records by type
  
  # Training economy
  totalSpent: BigInt! @default(value: "0") # Total cost spent on training
  spentByType: [BigInt!]! @default(value: "[0,0,0]") # Costs by training type
  totalTrainingCost: BigInt! @default(value: "0") # Total training cost
  trainingCostByType: [BigInt!]! @default(value: "[0,0,0]") # Training costs by type

  # =============================================================================
  # RELATIONS
  # =============================================================================
  activities: [Activity!]! @derivedFrom(field: "hero") # Activity history for this hero
}

# =============================================================================
# ENUMERATIONS
# =============================================================================

"""
Defines the different sources from which weapons can be obtained
"""
enum WeaponSource {
  GACHA_MACHINE # Generated from gacha tokens
  HERO_MACHINE # Generated from hero machine
  REMIXER # Created by combining other weapons
  DIRECT_MINT # Directly minted (admin/special events)
}

"""
Defines the type of remix operation used to create a weapon
"""
enum RemixType {
  NORMAL # Standard weapon mixing
  LEGENDARY # Legendary weapon mixing (higher cost/rarity)
}

"""
Weapon request tracking entity for managing asynchronous weapon generation from various sources
"""
type WeaponRequest @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: String! # Request ID from blockchain event
  source: WeaponSource! # Where this weapon request originated
  requester: Bytes! # Address that made the request
  timestamp: BigInt! # When request was made
  
  # =============================================================================
  # REQUEST TRACKING
  # =============================================================================
  expectedWeapons: Int! # Number of weapons expected to be generated
  generatedWeapons: Int! @default(value: "0") # Counter of weapons actually generated
  completed: Boolean! @default(value: false) # Whether request is fully completed
  
  # =============================================================================
  # GACHA MACHINE SPECIFIC FIELDS
  # =============================================================================
  gachaTokenId: BigInt # Gacha token ID used (for stats tracking)
  gachaQty: Int # Quantity requested from gacha
  
  # =============================================================================
  # HERO MACHINE SPECIFIC FIELDS
  # =============================================================================
  heroSlot: BigInt # Equipment slot for hero machine
  heroQty: Int # Quantity requested from hero machine
  heroCost: BigInt # Total cost paid
  heroCostPerWeapon: BigInt # Calculated cost per weapon (cost/qty)
  
  # =============================================================================
  # REMIXER SPECIFIC FIELDS
  # =============================================================================
  remixedWeaponIds: [BigInt!] # IDs of weapons that were burned/consumed
  remixRarity: Int # Target rarity for remix
  remixType: RemixType # Type of remix (normal/legendary)
  remixCost: BigInt # Cost for remix requests
  
  # =============================================================================
  # RELATIONS
  # =============================================================================
  generatedWeaponIds: [String!]! # IDs of weapons generated from this request
}

"""
Weapon entity representing a weapon NFT with attributes, equipment status, and source tracking
"""
type Weapon @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: String! # Weapon token ID
  owner: Player! # Player who owns this weapon
  minter: Bytes! # Address that minted this weapon
  mintedTimestamp: BigInt! # When this weapon was minted

  # =============================================================================
  # WEAPON ATTRIBUTES
  # =============================================================================
  source: WeaponSource! # How this weapon was obtained
  rarity: Int! # 0=COMMON, 1=UNCOMMON, 2=RARE, 3=EPIC, 4=HEROIC, 5=LEGENDARY, 6=MYTHIC
  weaponType: Int! # Type/category of weapon
  sharpness: Int! # Current sharpness level (affects damage and reward bonus)
  maxSharpness: Int! # Maximum sharpness this weapon can achieve
  durability: Int! # Current durability (affects usage)
  maxDurability: Int! # Maximum durability this weapon can have
  broken: Boolean! @default(value: false) # Whether weapon is broken (0 durability)

  # =============================================================================
  # EQUIPMENT STATUS
  # =============================================================================
  equipped: Boolean! @default(value: false) # Whether weapon is currently equipped
  equippedHeroId: String # ID of hero that has this weapon equipped (null if not equipped)
  equippedBy: [Hero!]! @derivedFrom(field: "equippedWeapon") # Hero relation

  # =============================================================================
  # SOURCE TRACKING FOR ANALYTICS
  # =============================================================================
  requestId: String # Link to WeaponRequest (null for DIRECT_MINT)
  
  # Gacha machine-specific tracking
  sourceGachaTokenId: BigInt # Gacha token ID used if source = GACHA_MACHINE
  
  # Hero machine-specific tracking
  sourceHeroCost: BigInt # Cost paid if source = HERO_MACHINE
  
  # Remixer-specific tracking
  sourceRemixedWeaponIds: [BigInt!] # IDs of weapons consumed if source = REMIXER
  sourceRemixRarity: Int # Target rarity if source = REMIXER
  sourceRemixType: RemixType # Type of remix if source = REMIXER
}

"""
Defines the different types of gacha tokens available
"""
enum GachaType {
  BRONZE # Bronze gacha tokens (lowest tier)
  SILVER # Silver gacha tokens
  GOLD # Gold gacha tokens
  RAINBOW # Rainbow gacha tokens (highest tier)
}

"""
Defines the different types of staking mechanisms available
"""
enum StakingType {
  DRAGMA_UNDERLINGS # Standard hero staking for rewards
  FISHING_SLIME_BAY # Fishing in Slime Bay zone (zone 0)
  FISHING_SHROOM_GROTTO # Fishing in Shroom Grotto zone (zone 1)
  FISHING_SKEET_PIER # Fishing in Skeet Pier zone (zone 2)
  FISHING_MAGMA_MIRE # Fishing in Magma Mire zone (zone 3)
  DRAGMA_TAILS # Dragma in Tails zone (zone 0)
  DRAGMA_LEGS # Dragma in Legs zone (zone 1)
  DRAGMA_TORSO # Dragma in Torso zone (zone 2)
  DRAGMA_HEAD # Dragma in Head zone (zone 3)
}

"""
Defines the contract where a hero died
"""
enum DeathLocation {
  FISHING # Hero died in Fishing contract
  DRAGMA # Hero died in Dragma contract
}

"""
Defines the different types of training methods available
"""
enum TrainingType {
  NORMAL
  CHAOS
  UNKNOWN
}

# =============================================================================
# STATS & METRICS ENTITIES
# =============================================================================

type DragmaUnderlingsGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # Singleton: 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # STAKING STATISTICS
  # =============================================================================
  totalStakedHeroes: Int! @default(value: "0") # Total heroes ever staked
  currentStakedHeroes: Int! @default(value: "0") # Currently staked heroes
  totalUnstakedHeroes: Int! @default(value: "0") # Total heroes ever unstaked
  
  # =============================================================================
  # REWARDS STATISTICS
  # =============================================================================
  totalRewardsClaimed: BigInt! @default(value: "0") # Total rewards claimed globally
  totalClaims: Int! @default(value: "0") # Total number of claim events
  averageClaimAmount: BigInt! @default(value: "0") # Calculated: totalRewards / totalClaims
  
  # =============================================================================
  # HERO DISTRIBUTION
  # =============================================================================
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
}

type DragmaUnderlingsUserStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # User address
  player: Player! # Relation to Player
  
  # =============================================================================
  # STAKING STATISTICS
  # =============================================================================
  stakedHeroes: Int! @default(value: "0") # Total heroes staked by this user
  currentStakedHeroes: Int! @default(value: "0") # Currently staked heroes
  totalStakes: Int! @default(value: "0") # Total stake events
  totalUnstakes: Int! @default(value: "0") # Total unstake events
  
  # =============================================================================
  # REWARDS STATISTICS
  # =============================================================================
  totalRewardsClaimed: BigInt! @default(value: "0") # Total rewards claimed by this user
  totalClaims: Int! @default(value: "0") # Total claim events
  averageStakingDuration: BigInt! @default(value: "0") # Average staking duration in seconds
  
  # =============================================================================
  # HERO DISTRIBUTION
  # =============================================================================
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
}

type DragmaGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # HERO STATISTICS
  # =============================================================================
  # Currently staked heroes (alive + dead not yet revived). This is the true total currently in Dragma.
  totalHeroes: Int! @default(value: "0") # Current staked = active alive + dead (awaiting revive)
  totalHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current staked per zone [TAILS, LEGS, TORSO, HEAD]
  # New explicit counters
  totalStakes: Int! @default(value: "0") # Total stake events
  totalUnstakes: Int! @default(value: "0") # Total unstake events
  completedSessions: Int! @default(value: "0") # Sessions completed via unstake
  completedSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Completed sessions per zone (unstakes)
  currentActiveStaked: Int! @default(value: "0") # Current alive & staked heroes
  currentActiveStakedPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current alive & staked per zone
  currentDeadHeroes: Int! @default(value: "0") # Currently dead in Dragma (not yet revived)
  currentDeadHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Currently dead per zone
  currentDeadByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Dead (awaiting revive) by level (0-100)
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution of current alive & staked heroes by level (0-100)
  # 2D matrix: heroes currently alive & staked per zone and level: [zone][level] - [TAILS, LEGS, TORSO, HEAD] × [0-100]
  heroesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  # Per-zone per-level matrices. All are [zone][level] with zones [TAILS, LEGS, TORSO, HEAD] and levels [0-100].
  stakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]") # Cumulative stakes by level per zone
  unstakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]") # Cumulative unstakes by level per zone
  completedByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]") # Completed sessions (unstakes) by level per zone
  currentActiveByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]") # Current alive & staked heroes by level per zone
  currentDeadByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]") # Currently dead (not yet revived) by level per zone
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalFeesPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Total fees paid per zone
  totalRewardsAmount: BigInt! @default(value: "0") # Total rewards earned
  
  # =============================================================================
  # REWARDS TRACKING
  # =============================================================================
  # Rewards per zone: [zone0, zone1, zone2, zone3] × [primary, secondary1, secondary2, secondary3, tertiary]
  rewardsPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]")
  totalShardsWon: Int! @default(value: "0") # Total weapon shards won
  shardsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Shards won per zone
  totalBonuses: Int! @default(value: "0") # Total bonus items won
  bonusesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Bonuses won per zone
  
  # =============================================================================
  # GACHA TRACKING
  # =============================================================================
  totalGachaWon: Int! @default(value: "0") # Total gacha tokens won
  gachaByTokenId: [Int!]! @default(value: "[0,0,0,0]") # [BRONZE, SILVER, GOLD, RAINBOW]
  gachaPerZone: [Int!]! @default(value: "[0,0,0,0]") # Gacha won per zone [TAILS, LEGS, TORSO, HEAD]
  # 3D array: [zone][tokenId] - [zone0, zone1, zone2, zone3] × [BRONZE, SILVER, GOLD, RAINBOW]
  gachaByZoneAndTokenId: [[Int!]!]! @default(value: "[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]")
  
  # =============================================================================
  # DEATH & REVIVAL STATISTICS
  # =============================================================================
  totalDeaths: Int! @default(value: "0") # Total number of hero deaths
  deathsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per zone [TAILS, LEGS, TORSO, HEAD]
  totalRevivals: Int! @default(value: "0") # Total number of hero revivals
  totalSpentOnRevive: BigInt! @default(value: "0") # Total cost spent on revivals
}

type DragmaUserStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # User address
  player: Player! # Relation to Player
  
  # =============================================================================
  # HERO STATISTICS
  # =============================================================================
  # Current alive & staked heroes for this user
  totalHeroes: Int! @default(value: "0") # Currently active staked heroes (alive) for this user
  heroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # [TAILS, LEGS, TORSO, HEAD]
  # New explicit counters
  totalStakes: Int! @default(value: "0") # Total stake events by this user
  totalUnstakes: Int! @default(value: "0") # Total unstake events by this user
  completedSessions: Int! @default(value: "0") # Sessions completed via unstake
  completedSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Completed sessions per zone
  currentActiveStaked: Int! @default(value: "0") # Current alive & staked heroes for this user
  currentActiveStakedPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current alive & staked per zone
  currentDeadHeroes: Int! @default(value: "0") # Currently dead in Dragma (not yet revived)
  currentDeadHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Currently dead per zone
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
  # 3D array: [zone][level] - [TAILS, LEGS, TORSO, HEAD] × [0-100] for detailed level distribution per zone
  heroesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  stakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  unstakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  completedByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  currentActiveByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  currentDeadByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]")
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalFees: BigInt! @default(value: "0") # Total fees paid by this user
  feesPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Fees paid per zone
  totalRewardsAmount: BigInt! @default(value: "0") # Total rewards earned by this user
  
  # =============================================================================
  # REWARDS TRACKING
  # =============================================================================
  # Rewards per zone: [zone0, zone1, zone2, zone3] × [primary, secondary1, secondary2, secondary3, tertiary]
  rewardsPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]")
  totalShardsWon: Int! @default(value: "0") # Total weapon shards won by this user
  shardsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Shards won per zone
  totalBonuses: Int! @default(value: "0") # Total bonus items won by this user
  bonusesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Bonuses won per zone
  totalSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Sessions per zone
  
  # =============================================================================
  # GACHA TRACKING
  # =============================================================================
  totalGachaWon: Int! @default(value: "0") # Total gacha tokens won by this user
  gachaByTokenId: [Int!]! @default(value: "[0,0,0,0]") # [BRONZE, SILVER, GOLD, RAINBOW]
  gachaPerZone: [Int!]! @default(value: "[0,0,0,0]") # Gacha won per zone [TAILS, LEGS, TORSO, HEAD]
  # 3D array: [zone][tokenId] - [zone0, zone1, zone2, zone3] × [BRONZE, SILVER, GOLD, RAINBOW]
  gachaByZoneAndTokenId: [[Int!]!]! @default(value: "[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]")
  
  # =============================================================================
  # DEATH & REVIVAL STATISTICS
  # =============================================================================
  totalDeaths: Int! @default(value: "0") # Total number of hero deaths for this user
  deathsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per zone [TAILS, LEGS, TORSO, HEAD]
  totalRevivals: Int! @default(value: "0") # Total number of hero revivals for this user
  totalSpentOnRevive: BigInt! @default(value: "0") # Total cost spent on revivals by this user
}
type FishingGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # HERO STATISTICS
  # =============================================================================
  # Currently staked heroes (alive + dead not yet revived). This is the true total currently in Fishing.
  totalHeroes: Int! @default(value: "0") # Current staked = active alive + dead (awaiting revive)
  totalHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current staked per zone [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  # New explicit counters
  totalStakes: Int! @default(value: "0") # Total stake events
  totalUnstakes: Int! @default(value: "0") # Total unstake events
  completedSessions: Int! @default(value: "0") # Sessions completed via unstake
  completedSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Completed sessions per zone
  currentActiveStaked: Int! @default(value: "0") # Current alive & staked heroes
  currentActiveStakedPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current alive & staked per zone
  currentDeadHeroes: Int! @default(value: "0") # Currently dead in Fishing (not yet revived)
  currentDeadHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Currently dead per zone
  currentDeadByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Dead (awaiting revive) by level (0-100)
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
  heroesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  stakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  unstakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  completedByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  currentActiveByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  currentDeadByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalFeesPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Total fees paid per zone
  totalRewardsAmount: BigInt! @default(value: "0") # Total rewards earned
  rewardsPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Rewards earned per zone
  
  # =============================================================================
  # REWARDS TRACKING
  # =============================================================================
  totalShardsWon: Int! @default(value: "0") # Total weapon shards won
  shardsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Shards won per zone
  totalBonuses: Int! @default(value: "0") # Total bonus items won
  bonusesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Bonuses won per zone
  
  # =============================================================================
  # DEATH & REVIVAL STATISTICS
  # =============================================================================
  totalDeaths: Int! @default(value: "0") # Total number of hero deaths
  deathsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per zone [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  totalRevivals: Int! @default(value: "0") # Total number of hero revivals
  totalSpentOnRevive: BigInt! @default(value: "0") # Total cost spent on revivals
}

type FishingUserStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # User address
  player: Player! # Relation to Player
  
  # =============================================================================
  # HERO STATISTICS
  # =============================================================================
  # Current alive & staked heroes for this user
  totalHeroes: Int! @default(value: "0") # Currently active staked heroes (alive) for this user
  heroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  # New explicit counters
  totalStakes: Int! @default(value: "0") # Total stake events by this user
  totalUnstakes: Int! @default(value: "0") # Total unstake events by this user
  completedSessions: Int! @default(value: "0") # Sessions completed via unstake
  completedSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Completed sessions per zone
  currentActiveStaked: Int! @default(value: "0") # Current alive & staked heroes for this user
  currentActiveStakedPerZone: [Int!]! @default(value: "[0,0,0,0]") # Current alive & staked per zone
  currentDeadHeroes: Int! @default(value: "0") # Currently dead in Fishing (not yet revived)
  currentDeadHeroesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Currently dead per zone
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
  heroesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  stakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  unstakesByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  completedByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  currentActiveByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  currentDeadByLevelPerZone: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]")
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalFees: BigInt! @default(value: "0") # Total fees paid by this user
  feesPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Fees paid per zone
  totalRewardsAmount: BigInt! @default(value: "0") # Total rewards earned by this user
  rewardsPerZone: [BigInt!]! @default(value: "[0,0,0,0]") # Rewards earned per zone
  
  # =============================================================================
  # REWARDS TRACKING
  # =============================================================================
  totalShardsWon: Int! @default(value: "0") # Total weapon shards won by this user
  shardsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Shards won per zone
  totalBonuses: Int! @default(value: "0") # Total bonus items won by this user
  bonusesPerZone: [Int!]! @default(value: "[0,0,0,0]") # Bonuses won per zone
  totalSessionsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Sessions per zone
  
  # =============================================================================
  # DEATH & REVIVAL STATISTICS
  # =============================================================================
  totalDeaths: Int! @default(value: "0") # Total number of hero deaths for this user
  deathsPerZone: [Int!]! @default(value: "[0,0,0,0]") # Deaths per zone [SLIME_BAY, SHROOM_GROTTO, SKEET_PIER, MAGMA_MIRE]
  totalRevivals: Int! @default(value: "0") # Total number of hero revivals for this user
  totalSpentOnRevive: BigInt! @default(value: "0") # Total cost spent on revivals by this user
}

type GymGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # TRAINING STATISTICS
  # =============================================================================
  totalAttemptedTrainings: Int! @default(value: "0") # Total training attempts
  totalSuccessfulTrainings: Int! @default(value: "0") # Total successful trainings (level increased)
  totalFailedTrainings: Int! @default(value: "0") # Total failed trainings (level unchanged)
  
  # =============================================================================
  # TRAINING STATISTICS BY TYPE [NORMAL, CHAOS, UNKNOWN]
  # =============================================================================
  attemptedByType: [Int!]! @default(value: "[0,0,0]") # Attempts by training type
  successfulByType: [Int!]! @default(value: "[0,0,0]") # Successes by training type
  failedByType: [Int!]! @default(value: "[0,0,0]") # Failures by training type
  totalOutcomeSumByType: [BigInt!]! @default(value: "[0,0,0]") # Sum of level increases by type
  outcomesCountByType: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Detailed outcome counts by type
  sumOfChancesByType: [[BigInt!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Sum of chances by type
  chancesCountByType: [Int!]! @default(value: "[0,0,0]") # Number of chance records by type
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalSpent: BigInt! @default(value: "0") # Total cost spent on training
  spentByType: [BigInt!]! @default(value: "[0,0,0]") # Costs by training type
}

type GymUserStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # User address
  player: Player! # Relation to Player
  
  # =============================================================================
  # TRAINING STATISTICS
  # =============================================================================
  totalAttemptedTrainings: Int! @default(value: "0") # Total training attempts
  totalSuccessfulTrainings: Int! @default(value: "0") # Total successful trainings (level increased)
  totalFailedTrainings: Int! @default(value: "0") # Total failed trainings (level unchanged)
  
  # =============================================================================
  # TRAINING STATISTICS BY TYPE [NORMAL, CHAOS, UNKNOWN]
  # =============================================================================
  attemptedByType: [Int!]! @default(value: "[0,0,0]") # Attempts by training type
  successfulByType: [Int!]! @default(value: "[0,0,0]") # Successes by training type
  failedByType: [Int!]! @default(value: "[0,0,0]") # Failures by training type
  totalOutcomeSumByType: [BigInt!]! @default(value: "[0,0,0]") # Sum of level increases by type
  outcomesCountByType: [[Int!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Detailed outcome counts by type
  sumOfChancesByType: [[BigInt!]!]! @default(value: "[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]]") # Sum of chances by type
  chancesCountByType: [Int!]! @default(value: "[0,0,0]") # Number of chance records by type
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalSpent: BigInt! @default(value: "0") # Total cost spent on training
  spentByType: [BigInt!]! @default(value: "[0,0,0]") # Costs by training type
}

enum RemixOutcome {
  FAIL # +0 tier
  SUCCESS # +1 tier
  PERFECT # +2 tier
}

type RemixGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # REMIX STATISTICS
  # =============================================================================
  totalRemixes: BigInt! @default(value: "0") # Total remixes ever performed
  remixesByNumWeapons: [BigInt!]! @default(value: "[0,0,0,0]") # [2 weapons, 3, 4, 5]
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalSpent: BigInt! @default(value: "0") # Total cost spent on remixes
  spentByNumWeapons: [BigInt!]! @default(value: "[0,0,0,0]") # Costs by number of weapons
  
  # =============================================================================
  # OUTCOME TRACKING
  # =============================================================================
  # 3D array: [numWeapons][rarity][outcome] - First dimension: Number of weapons (2-5) → Index 0-3, Second dimension: Source rarity (0-5) → Index 0-5, Third dimension: Outcome (0-2) → Index 0-2 (FAIL, SUCCESS, PERFECT)
  outcomesByTypeAndRarity: [[[BigInt!]!]!]! @default(value: "[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]]")
}

type RemixUserStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: Bytes! # User address
  player: Player! # Relation to Player
  
  # =============================================================================
  # REMIX STATISTICS
  # =============================================================================
  totalRemixes: BigInt! @default(value: "0") # Total remixes performed by this user
  remixesByNumWeapons: [BigInt!]! @default(value: "[0,0,0,0]") # [2 weapons, 3, 4, 5]
  
  # =============================================================================
  # ECONOMY STATISTICS
  # =============================================================================
  totalSpent: BigInt! @default(value: "0") # Total cost spent on remixes
  spentByNumWeapons: [BigInt!]! @default(value: "[0,0,0,0]") # Costs by number of weapons
  
  # =============================================================================
  # OUTCOME TRACKING
  # =============================================================================
  # 3D array: [numWeapons][rarity][outcome] - Same indexing as global stats
  outcomesByTypeAndRarity: [[[BigInt!]!]!]! @default(value: "[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]], [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]]")
}

"""
Unified activity feed entity for all game events across all contracts
"""
type Activity @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # Format: chainId_block_logIndex
  timestamp: BigInt! # Unix timestamp of the event
  user: Bytes! # Address involved in the event
  eventType: String! # Event type (e.g., 'DRAGMA_UNDERLINGS_STAKE', 'DRAGMA_STAKE', 'FISHING_STAKE', 'REMIX', 'TRAINING')
  details: String! # JSON stringified details (e.g., {heroId: 123, amount: 456})
  contract: String! # Contract name (e.g., 'DragmaUnderlings', 'WeaponRemixer')
  
  # =============================================================================
  # OPTIONAL FILTERS
  # =============================================================================
  heroId: String # Optional, for hero-specific filters (ID of hero involved)
  hero: Hero @index # Relation to hero (optional, based on heroId)
  stakingType: StakingType # Optional, for staking type differentiation
}

"""
Global statistics entity for hero tracking across the entire game
"""
type HeroesGlobalStats @entity {
  # =============================================================================
  # BASIC INFO
  # =============================================================================
  id: ID! # 'global'
  lastUpdated: BigInt! @default(value: "0")
  
  # =============================================================================
  # HERO COUNTS
  # =============================================================================
  totalHeroes: Int! @default(value: "0") # Total number of heroes in existence
  totalMinted: Int! @default(value: "0") # Cumulative count of all heroes ever minted
  totalBurned: Int! @default(value: "0") # Cumulative count of all heroes ever burned
  
  # =============================================================================
  # HERO DISTRIBUTION
  # =============================================================================
  heroesByLevel: [Int!]! @default(value: "[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]") # Distribution by level (0-100)
}